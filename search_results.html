<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
      rel="stylesheet"
    />
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      .navbar-nav {
        margin-left: auto;
      }
    </style>
  </head>

  

  <body class="p-3 m-0 border-0 bd-example m-0 border-0">
    <!-- Example Code -->

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"><b>OfficialDomains.in</b></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
              <a class="nav-link" href="/services">Services</a>
              <a class="nav-link" href="/about">About</a>
              <a class="nav-link" href="/contact">Contact</a>
            </div>
          </div>
      </div>
    </nav>

    <div id="table">

    </div>


    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const inputValue = urlParams.get('query');
        function show(data){
            var table = '<div class = "container">';
            table += '<table border=0 class="center">';
            var tr = "";
            for(let i = 0; i < data.length; i++) {
                tr += "<tr>" + `<td><a target = "_blank" href = "${data[i].link}">${data[i].name} </a></td>` + "</tr>";
            }
            table += tr + "</table>";
            table += '</div>'
            document.getElementById('table').innerHTML += table;
        }
        
        async function reqServer(searchQuery){
            try {
                const req = 'https://green-coati-shoe.cyclic.app/search/' + searchQuery;
                console.log(req);
                const response = await fetch(req, {method: 'GET', headers: {
                    'Content-Type': 'application/json'
                }});
                let result  = await response.json();
                show(result);
            } catch (error) {}
        }

        reqServer(inputValue);
    </script>
    
    <!-- End Example Code -->
  </body>
</html>
